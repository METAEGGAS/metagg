<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Egg Exchange</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>*{margin:0;padding:0;box-sizing:border-box}body{width:100vw;height:100vh;overflow:hidden;position:relative;background:#f0f0f0;font-family:Arial}#frame{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:600px;height:1000px;background:url('https://files.catbox.moe/mh00o2.png') no-repeat center;background-size:100% 100%;z-index:1;pointer-events:none}.container{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:600px;height:1000px;z-index:0;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:25px}.box{background:#5c4033;color:#fff;padding:25px;border-radius:12px;text-align:center;width:280px;box-shadow:0 4px 15px rgba(0,0,0,.3)}.row{display:flex;gap:10px;align-items:center;justify-content:center;margin:10px 0}.small-box{background:#4a3529;border:2px solid #8b6f47;padding:8px 12px;border-radius:6px;font-size:16px;font-weight:bold;min-width:80px}input[type=number]{padding:10px;font-size:16px;border:2px solid #8b6f47;border-radius:6px;text-align:center;font-weight:bold;width:120px}.label{font-size:14px;color:#ffb380;margin-bottom:5px}.price{font-size:26px;font-weight:bold;margin-top:12px;color:#ffd700;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.info{font-size:13px;color:#ffb380;margin-top:6px}.btn{background:#2c5f2d;color:#fff;border:none;padding:15px 40px;font-size:18px;font-weight:bold;border-radius:8px;cursor:pointer;box-shadow:0 3px 10px rgba(0,0,0,.3);transition:.3s}.btn:hover{background:#3a7d3c;transform:scale(1.05)}#icon{position:fixed;bottom:-5px;left:calc(50% + 15px);width:285px;height:285px;background:url('https://files.catbox.moe/dd2flf.png') no-repeat center;background-size:contain;z-index:2}#modal{display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.8);z-index:999;justify-content:center;align-items:center}#modal.show{display:flex}.modal-box{background:#5c4033;padding:30px;border-radius:15px;color:#fff;min-width:320px;box-shadow:0 5px 20px rgba(0,0,0,.5)}.modal-row{margin:15px 0;text-align:center}.modal-label{color:#ffb380;font-size:14px;margin-bottom:8px}.modal-value{background:#4a3529;padding:12px;border-radius:8px;font-size:18px;font-weight:bold;color:#ffd700}.modal-btn{background:#2c5f2d;color:#fff;border:none;padding:12px 30px;font-size:16px;font-weight:bold;border-radius:8px;cursor:pointer;margin:5px;transition:.3s}.modal-btn:hover{background:#3a7d3c}.modal-btn.cancel{background:#8b4513}.modal-btn.cancel:hover{background:#a0522d}</style></head><body><div class="container"><div class="box"><div class="row"><div><div class="label">My Balance</div><div class="small-box" id="myBalance">$0</div></div><div><div class="label">Egg Count</div><div class="small-box" id="eggCount">0</div></div></div><div style="margin-top:20px"><div class="label">Enter Eggs</div><input type="number" id="eggs" placeholder="0" oninput="calc()" min="0"></div><div class="price" id="totalPrice">$0.00</div><div class="info" id="unitPrice">Egg Price: $0.222</div></div><button class="btn" onclick="exchange()">Exchange</button></div></div><div id="frame"></div><div id="icon"></div><div id="modal"><div class="modal-box"><h3 style="text-align:center;margin-bottom:20px">Confirm Exchange</h3><div class="modal-row"><div class="modal-label">Eggs to Sell</div><div class="modal-value" id="modalEggs">0</div></div><div class="modal-row"><div class="modal-label">Amount to Receive</div><div class="modal-value" id="modalAmount">$0.00</div></div><div class="modal-row"><div class="modal-label">Submission Date</div><div class="modal-value" id="modalDate">-</div></div><div style="text-align:center;margin-top:25px"><button class="modal-btn" onclick="confirmExchange()">Confirm</button><button class="modal-btn cancel" onclick="closeModal()">Cancel</button></div></div></div><script type="module">import{initializeApp}from"https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";import{getAuth,signInAnonymously,onAuthStateChanged}from"https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";import{getFirestore,doc,getDoc,setDoc,updateDoc,onSnapshot}from"https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";const firebaseConfig={apiKey:"AIzaSyA-MK1RYmvpYJrTOBAQcxDqxhp-z_FOb1o",authDomain:"mzjsjjshs.firebaseapp.com",projectId:"mzjsjjshs",storageBucket:"mzjsjjshs.firebasestorage.app",messagingSenderId:"944370558426",appId:"1:944370558426:web:70d4ee772c487f48b58ce3",measurementId:"G-CWJWKWBBST"};const app=initializeApp(firebaseConfig);const auth=getAuth(app);const db=getFirestore(app);const eggPrice=.222;let currentUser=null;let userData={balance:0,eggs:0};window.calc=function(){let e=parseInt(document.getElementById('eggs').value)||0,total=(e*eggPrice).toFixed(2);document.getElementById('totalPrice').textContent='$'+total;document.getElementById('unitPrice').textContent='Egg Price: $'+eggPrice.toFixed(3)};window.exchange=function(){let e=parseInt(document.getElementById('eggs').value)||0;if(e<=0){alert('Enter egg count first!');return}if(userData.eggs<e){alert('Insufficient eggs!');return}let amount=(e*eggPrice).toFixed(2);document.getElementById('modalEggs').textContent=e;document.getElementById('modalAmount').textContent='$'+amount;document.getElementById('modalDate').textContent=new Date().toLocaleString('en-US');document.getElementById('modal').classList.add('show');window.pendingEggs=e;window.pendingAmount=parseFloat(amount)};window.confirmExchange=async function(){if(!currentUser)return;try{const userRef=doc(db,'users',currentUser.uid);await updateDoc(userRef,{eggs:userData.eggs-window.pendingEggs,balance:userData.balance+window.pendingAmount});const eggsRef=doc(db,'eggs',currentUser.uid);await setDoc(eggsRef,{eggs:userData.eggs-window.pendingEggs,userId:currentUser.uid,timestamp:new Date()},{merge:true});document.getElementById('eggs').value='';calc();closeModal();alert('Exchange successful!')}catch(e){alert('An error occurred: '+e.message)}};window.closeModal=function(){document.getElementById('modal').classList.remove('show')};onAuthStateChanged(auth,async(user)=>{if(user){currentUser=user;const userRef=doc(db,'users',user.uid);const userSnap=await getDoc(userRef);if(!userSnap.exists()){await setDoc(userRef,{balance:1000,eggs:0,createdAt:new Date()})}onSnapshot(userRef,(doc)=>{if(doc.exists()){userData=doc.data();document.getElementById('myBalance').textContent='$'+userData.balance.toFixed(2);document.getElementById('eggCount').textContent=userData.eggs}})}else{signInAnonymously(auth)}});calc()</script></body></html>
    
  </body>
  
</html>

